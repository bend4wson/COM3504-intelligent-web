<!--<%- include('header'); -%>-->

<!--<div class="card col-11 col-md-6" style="margin: 100px auto;">-->
<!--    <div class="card-body">-->
<!--        <h1>Update your sighting below:</h1>-->

<!--        <form id="sightingForm">-->
<!--&lt;!&ndash;            <div class="mb-3">&ndash;&gt;-->
<!--&lt;!&ndash;                <label class="form-label" for="type">Type:</label>&ndash;&gt;-->
<!--&lt;!&ndash;                <input class="form-control" type="text" name="type" id="type" required />&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--            <input class="form-control" type="hidden" name="id" id="id" required value="<%- sighting._id %>" />-->
<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="type">Type:</label>-->
<!--                <select class="form-control" name="type" id="type" required></select>-->
<!--            </div>-->

<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="description">Description:</label>-->
<!--                <input class="form-control" type="text" name="description" id="description" required value="<%- sighting.description %>" />-->
<!--            </div>-->
<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="lat">Latitude:</label>-->
<!--                <input class="form-control" type="number" step="any" name="lat" id="lat" required value="<%- sighting.location.lat %>" />-->
<!--            </div>-->
<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="lng">Longitude:</label>-->
<!--                <input class="form-control" type="number" step="any" name="lng" id="lng" required value="<%- sighting.location.lng %>" />-->
<!--            </div>-->
<!--            <input class="form-control" type="hidden" name="userLat" id="userLat" required />-->
<!--            <input class="form-control" type="hidden" name="userLng" id="userLng" required />-->
<!--            <div class="mb-3">-->
<!--                <label class="form-label" for="picture">Picture:</label>-->
<!--                <input type="file" name="picture" id="picture" accept="image/*" />-->
<!--            </div>-->
<!--            <button type="submit">Update Sighting</button>-->
<!--            <div id="alert" class="alert alert-success" role="alert" style="display: none">-->
<!--               Update successful!-->
<!--            </div>-->
<!--        </form>-->
<!--    </div>-->
<!--</div>-->
<!--<script>-->
<!--    // function getLocation() {-->
<!--    //     console.log('Getting location...');-->
<!--    //     if (navigator.geolocation) {-->
<!--    //         navigator.geolocation.getCurrentPosition(-->
<!--    //             (position) => {-->
<!--    //                 console.log('Position received:', position);-->
<!--    //                 document.getElementById('userLat').value = position.coords.latitude;-->
<!--    //                 document.getElementById('userLng').value = position.coords.longitude;-->
<!--    //             },-->
<!--    //             (error) => {-->
<!--    //                 console.warn(`ERROR(${error.code}): ${error.message}`);-->
<!--    //                 console.log('Error details:', error);-->
<!--    //             },-->
<!--    //             {-->
<!--    //                 enableHighAccuracy: true,-->
<!--    //                 timeout: 5000,-->
<!--    //                 maximumAge: 0,-->
<!--    //             }-->
<!--    //         );-->
<!--    //     } else {-->
<!--    //         console.log('Geolocation is not supported by this browser.');-->
<!--    //     }-->
<!--    // }-->
<!--    -->

<!--    async function fetchBirdTypes() {-->
<!--        const sparqlQuery = `-->
<!--    PREFIX dbo: <http://dbpedia.org/ontology/>-->
<!--    PREFIX dbr: <http://dbpedia.org/resource/>-->
<!--    SELECT DISTINCT ?bird ?birdLabel-->
<!--    WHERE {-->
<!--        dbr:Bird dbo:wikiPageWikiLink ?bird .-->
<!--        ?bird rdfs:label ?birdLabel .-->
<!--        FILTER(lang(?birdLabel) = "en") .-->
<!--    }-->
<!--    LIMIT 1000-->
<!--    `;-->
<!--        const url = "https://dbpedia.org/sparql?query=" + encodeURIComponent(sparqlQuery) + "&format=json";-->

<!--        try {-->
<!--            const response = await fetch(url);-->
<!--            const data = await response.json();-->
<!--            return data.results.bindings;-->
<!--        } catch (error) {-->
<!--            console.error("Error fetching bird names:", error);-->
<!--            return [];-->
<!--        }-->
<!--    }-->


<!--    function populateBirdTypesDropdown(birdTypes) {-->
<!--        // Sort the birdTypes array alphabetically by birdLabel value-->
<!--        birdTypes.sort((a, b) => {-->
<!--            if (a.birdLabel.value < b.birdLabel.value) return -1;-->
<!--            if (a.birdLabel.value > b.birdLabel.value) return 1;-->
<!--            return 0;-->
<!--        });-->

<!--        const dropdown = document.getElementById("type");-->

<!--        // Create the "Unknown" option and set it as the default choice-->
<!--        const unknownOption = document.createElement("option");-->
<!--        unknownOption.value = "unknown";-->
<!--        unknownOption.textContent = "Unknown";-->
<!--        dropdown.appendChild(unknownOption);-->

<!--        const type = '<%- sighting.type %>';-->

<!--        birdTypes.forEach((birdType) => {-->
<!--            const option = document.createElement("option");-->
<!--            option.value = option.textContent = birdType.birdLabel.value;-->
<!--            if (option.value === type) {-->
<!--              option.selected = true;-->
<!--            }-->
<!--            dropdown.appendChild(option);-->
<!--        });-->
<!--    }-->






<!--    // Call getLocation when the page loads-->
<!--    // window.addEventListener('DOMContentLoaded', getLocation);-->

<!--    window.addEventListener('DOMContentLoaded', async () => {-->
<!--        const birdTypes = await fetchBirdTypes();-->
<!--        populateBirdTypesDropdown(birdTypes);-->
<!--        getLocation();-->
<!--    });-->
<!--</script>-->

<!--<script src="/javascripts/updateSighting.js"></script>-->


<!--<%- include('footer'); -%>-->
